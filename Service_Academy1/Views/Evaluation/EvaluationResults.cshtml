@model Service_Academy1.Models.EvaluationResultsViewModel

@section Scripts {
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>
    <script src="~/js/TraineeScript/EvaluationFormScript.js"></script>
}

@section Styles {
    <link rel="stylesheet" href="~/css/TraineeStyle/EvaluationResults.css" />
}

<h2>Evaluation Results for @Model.ProgramTitle</h2>
<p>Evaluated: @Model.EvaluatedCount / @Model.TotalTrainees (@Model.UnevaluatedCount unevaluated)</p>

<div class="container">
    <!-- Left Canvas Section -->
    <div class="canvas-container">
        @if (Model != null)
        {
            <canvas id="evaluationChart"
                    data-labels='@Html.Raw(Json.Serialize(Model.AverageRatings.Select(ar => ar.Category)))'
                    data-values='@Html.Raw(Json.Serialize(Model.AverageRatings.Select(ar => ar.AverageRating)))'>
            </canvas>
        }
        else
        {
            <p>No evaluation data available for this program.</p>
        }
    </div>

    <!-- Right Column -->
    <div class="right-column">
        <!-- Analysis Section -->
        <div class="box">
            <h4>Analysis:</h4>
            <p>@ViewBag.Analysis</p>
        </div>

        <!-- Impact Assessment Section -->
        <div class="box">
            <h4>Impact Assessment:</h4>
            <p>@ViewBag.ImpactAssessment</p>
        </div>
    </div>
</div>
